<div class="w-full max-w-4xl mx-auto mt-8 animate-fade-in-up">
  
  <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
      <h2 class="text-lg font-semibold text-slate-800 flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 text-blue-500">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
        </svg>        
        Conferência & Complemento
      </h2>
      <button (click)="cancel.emit()" class="text-sm text-slate-500 hover:text-slate-700 font-medium">
        Cancelar / Novo Upload
      </button>
    </div>

    <div class="p-6 grid gap-6 md:grid-cols-2">
      <!-- Extracted Data (Editable) -->
      <div class="space-y-4">
        <h3 class="text-sm font-medium text-slate-400 uppercase tracking-wider">Dados da Nota (Editável)</h3>
        
        <div class="group">
          <label class="block text-sm font-medium text-slate-700">Prestador (CNPJ)</label>
          <input 
            [(ngModel)]="data.prestadorCnpj" 
            class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border font-mono" 
            placeholder="00.000.000/0000-00"
            maxlength="18"
            inputmode="numeric"
            (input)="onCnpjInput($event)"
          >
          <p class="text-xs text-slate-400 mt-1">Máscara: 00.000.000/0000-00</p>
        </div>

        <div class="group">
          <label class="block text-sm font-medium text-slate-700">Tomador (CNPJ)</label>
          <input 
            [(ngModel)]="data.tomadorCnpj" 
            class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border font-mono" 
            placeholder="00.000.000/0000-00"
             maxlength="18"
             inputmode="numeric"
             (input)="onCnpjInput($event)"
          >
        </div>

        <div class="group">
          <label class="block text-sm font-medium text-slate-700">Paciente (Nome)</label>
          <input [(ngModel)]="data.pacienteNome" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border" placeholder="Nome do Paciente">
        </div>

        <div class="group">
          <label class="block text-sm font-medium text-slate-700">Valor Total</label>
          <input 
            [(ngModel)]="data.valorTotal" 
            class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border font-mono" 
            placeholder="0,00"
            inputmode="decimal"
            (input)="onCurrencyInput($event)"
          >
        </div>
      </div>

      <!-- Manual Entry -->
      <div class="space-y-4 border-l pl-6 border-slate-100">
        <h3 class="text-sm font-medium text-slate-400 uppercase tracking-wider">Complemento TISS</h3>

        <div>
          <label class="block text-sm font-medium text-slate-700">Código no Prestador</label>
          <input 
            [(ngModel)]="manualData.codigoPrestador" 
            type="text" 
            class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border" 
            placeholder="Ex: 123456" 
            maxlength="20"
            autofocus
          >
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700">Carteira do Beneficiário</label>
          <input 
            [(ngModel)]="manualData.numeroCarteira" 
            type="text" 
            class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border" 
            placeholder="Ex: 000000000000"
            maxlength="20"
            inputmode="numeric"
            (input)="onlyNumbers($event)"
          >
        </div>

        <div>
          <label class="block text-sm font-medium text-slate-700">Tipo de Guia</label>
          <select [(ngModel)]="manualData.tipoGuia" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border bg-white">
            <option value="SADT">SADT</option>
            <option value="RESUMO_INTERNACAO">Resumo de Internação</option>
          </select>
        </div>
      </div>
    </div>
    
    <div class="p-6 bg-slate-50 border-t border-slate-200 flex justify-end">
      <button 
        (click)="onGenerate()"
        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"
      >
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 mr-2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
        </svg>        
        Gerar Arquivo TISS
      </button>
    </div>
  </div>
</div>
